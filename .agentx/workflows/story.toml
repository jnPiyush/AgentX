# Story Workflow — Small, well-defined work items
# Skips PM/Architect if scope is clear (<=3 files)

[workflow]
name = "story"
description = "Small well-defined work — direct to engineer"
type = "story"

[[steps]]
id = "implement"
title = "Implement {{story_title}}"
agent = "engineer"
status_on_start = "In Progress"
status_on_complete = "In Review"
iterate = true
max_iterations = 10
completion_criteria = "All acceptance criteria met, tests pass at 80% coverage, no lint errors, docs updated"
can_clarify = ["architect", "product-manager"]
clarify_max_rounds = 3
clarify_sla_minutes = 60
clarify_blocking_allowed = true

[[steps]]
id = "review"
title = "Code review"
agent = "reviewer"
needs = ["implement"]
status_on_start = "In Review"
status_on_complete = "Done"
output = "docs/reviews/REVIEW-{{issue_number}}.md"
template = ".github/templates/REVIEW-TEMPLATE.md"
